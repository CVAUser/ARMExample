Установить macporst https://www.macports.org/


sudo port install arm-none-eabi-gcc
sudo port install arm-none-eabi-gdb
sudo port install arm-none-eabi-binutils

Отладчики
sudo port install openocd

Эмулятор железа QEMU
sudo port install qemu
sudo port install qemu +target_arm

Выйти из системы

Залить прошивку. Не корректно работает с gdb отладчиком (команды step, next)
Описание находится в папке stlink файл README

Отладка с помощью arm-none-eabi-gdb микроконтроллера STM32F407VG

1. Необходимо запустить утилиту openocd -f board/stm32f4discovery.cfg

# program and verify using elf/hex/s19. verify and reset
# are optional parameters
openocd -f board/stm32f4discovery.cfg \
	-c "program filename.elf verify reset exit"

# binary files need the flash address passing
openocd -f board/stm32f4discovery.cfg \
	-c "program filename.bin exit 0x08000000"

2. Запустить arm-none-eabi-gdb fancyblink.axf, где fancyblink объектный файл
3. Ввести команду target remote localhost:3333 для подключения к микроконтроллеру
4. Запуск команд отладки:
   load //залить прошивку
   monitor reset halt
   next
   step
   run
   finish
   break
   clear
   info registers
   x/fx адрес

run QENU in console
qemu-system-arm -M lm3s811evb -kernel $(FILE).elf -nographic

